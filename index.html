<!DOCTYPE html>
<html>
<head>
 <title>Custom Page Add-In</title>
 <script>
  geotab.addin.myaddin = () => {

   return {
    initialize(api, state, callback) {
     callback();
    },
    focus(api, state) {
     console.log('in focus')
   
     // event handler for submit
     document.querySelector("#submitBtn").onclick=function(){
     var _fromDate = document.querySelector("#startDate").value; //from Date picker
     var _toDate = document.querySelector("#endDate").value;  //from Date picker  

GetExceptions(api,_fromDate,_toDate,"bB","RuleIdlingId")
.then(res=>{
    console.log(res)
    GetExceptions(api,_fromDate,_toDate,"bB","RulePostedSpeedingId")
    .then(res=>{
        console.log(res)
        LoadChart()
    })
})
     }
     

     // User interface is available
    },
    blur(api, state) {
     // Save any Add-In state
    }
   };
  };
 </script>
</head>

<body>
    <h1>Data Visualization</h1>
    <div id="dateSelect">
        <label>Start Date<input type="Date" id="startDate"/></label>
        <label>End Date<input type="Date" id="endDate"/></label>
        <button type="input" id="submitBtn">Submit</button>
    </div>
    <canvas id="chartCanvas" style="max-width:600px;max-height: 800px;padding-left:50px"></canvas>

    <script src="helpers.js"></script>
</body>
<style>
    input[type="date"] {
        display: block;
        margin-bottom: 25px;
    }
</style>
</html>
